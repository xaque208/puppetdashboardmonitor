#! /usr/bin/env ruby

begin
  require 'json'
  require 'yaml'
  require 'puppetdashboardmonitoring'
rescue LoadError
  puts 'A required gem was not found'
  exit
end

def run

  config = YAML::load(File.read('etc/dashboard.yaml'))

  data = Hash.new
  data[:puppetdashboard] = PuppetDashboardMonitoring.go(config)
  data

end

output = run()
puts output.to_json

